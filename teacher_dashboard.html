<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Teacher Dashboard</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
            background-image: url('https://img.freepik.com/free-photo/vivid-blurred-colorful-wallpaper-background_58702-2460.jpg');
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
        }

        .sidebar {
            background-color: rgba(255, 255, 255, 0.6);
            width: 250px;
            height: 100%;
            box-shadow: 2px 0px 5px rgba(0, 0, 0, 0.1);
            position: fixed;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .sidebar h2 {
            margin-bottom: 20px;
            color: #333;
            font-size: 20px;
        }

        .sidebar a {
            text-decoration: none;
            color: #333;
            font-size: 16px;
            margin: 10px 0;
            padding: 10px;
            width: 100%;
            text-align: center;
            border-radius: 5px;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .sidebar a:hover {
            background-color: #007bff;
            color: white;
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.5);
        }

        .main-content {
            margin-left: 270px; /* Ensures content is well-aligned */
            padding: 20px;
            flex: 1;
            overflow-y: auto;
        }

        .stats-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .stat-card {
            background-color: rgba(255, 255, 255, 0.6);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            width: 200px;
            text-align: center;
            margin: 10px;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: scale(1.05);
        }

        .stat-card h3 {
            margin-bottom: 10px;
            color: #333;
            font-size: 18px;
        }

        .actions-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .action-card {
            background-color: rgba(255, 255, 255, 0.6);
            width: calc(50% - 20px);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .action-card h4 {
            margin-bottom: 10px;
            font-size: 18px;
            color: #333;
        }

        .action-card p {
            font-size: 14px;
            color: #555;
        }

        .section {
            background-color: rgba(255, 255, 255, 0.6);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .section h3 {
            text-align: center;
            color: #333;
            margin-bottom: 15px;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>Teacher Menu</h2>
        <a href="cq.html">Create Questions</a>
        <a href="#" onclick="launchTest()">Launch Test</a>
        <a href="rr.html">Review Results</a>
        <a href="rep.html">Reports</a>
        <a href="questionbank.html">Question Bank</a>
        <a href="#" id="logout">Logout</a>
    </div>

    <div class="main-content">
        <!-- Welcome Section -->
        <div class="section">
            <h3>Welcome, Examiner</h3>
            <p>You're responsible for designing exams, grading responses, and analyzing results.</p>
        </div>

        <!-- Statistics Section -->
        <div class="section">
            <h3>Statistics</h3>
            <div class="stats-container">
                <div class="stat-card">
                    <h3>Total Questions</h3>
                    <p>120</p>
                </div>
                <div class="stat-card">
                    <h3>Exams Reviewed</h3>
                    <p>35</p>
                </div>
                <div class="stat-card">
                    <h3>Reports Generated</h3>
                    <p>10</p>
                </div>
            </div>
        </div>

        <!-- Quick Actions Section -->
        <div class="section">
            <h3>Quick Actions</h3>
            <div class="actions-container">
                <div class="action-card" onclick="redirectTo('cq.html')">
                    <h4>Create Questions</h4>
                    <p>Design multiple choice or written questions for exams.</p>
                </div>
                <div class="action-card" onclick="redirectTo('Rr.html')">
                    <h4>Review Results</h4>
                    <p>Analyze and grade exam responses submitted by students.</p>
                </div>
                <div class="action-card" onclick="redirectTo('rep.html')">
                    <h4>Download Reports</h4>
                    <p>Generate and download detailed reports.</p>
                </div>
            </div>
        </div>

        <!-- Recent Activities Section -->
        <div class="section">
            <h3>Recent Activities</h3>
            <div class="actions-container">
                <div class="action-card">
                    <h4>Physics Midterm Questions</h4>
                    <p>Date: 2025-04-24</p>
                </div>
                <div class="action-card">
                    <h4>Reviewed Math Exam</h4>
                    <p>Date: 2025-04-23</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function redirectTo(page) {
            window.location.href = page;
        }

        document.getElementById("logout").addEventListener("click", function(event) {
            event.preventDefault();
            window.location.href = "dbms.html";
        });

        function launchTest() {
            // Create a popup container
            const popup = document.createElement("div");
            popup.style.position = "fixed";
            popup.style.top = "50%";
            popup.style.left = "50%";
            popup.style.transform = "translate(-50%, -50%)";
            popup.style.backgroundColor = "white";
            popup.style.padding = "20px";
            popup.style.boxShadow = "0 4px 8px rgba(0, 0, 0, 0.2)";
            popup.style.zIndex = "1000";
            // Style the popup for better appearance
            popup.style.borderRadius = "10px";
            popup.style.width = "400px";
            popup.style.fontFamily = "Arial, sans-serif";

            // Add a title to the popup
            const title = document.createElement("h3");
            title.textContent = "Launch Test";
            title.style.marginBottom = "15px";
            title.style.textAlign = "center";
            title.style.color = "#333";
            popup.appendChild(title);

            // Add input for test name
            const testNameInput = document.createElement("input");
            testNameInput.type = "text";
            testNameInput.placeholder = "Enter test name";
            testNameInput.style.display = "block";
            testNameInput.style.marginBottom = "10px";
            testNameInput.style.width = "100%";
            // Style the test name input
            testNameInput.style.padding = "10px";
            testNameInput.style.border = "1px solid #ccc";
            testNameInput.style.borderRadius = "5px";
            testNameInput.style.boxSizing = "border-box";
            popup.appendChild(testNameInput);

            // Add a container for question checkboxes
            const questionContainer = document.createElement("div");
            questionContainer.style.maxHeight = "200px";
            questionContainer.style.overflowY = "auto";
            questionContainer.style.marginBottom = "10px";
            // Style the question container
            questionContainer.style.border = "1px solid #ccc";
            questionContainer.style.borderRadius = "5px";
            questionContainer.style.padding = "10px";
            questionContainer.style.backgroundColor = "#f9f9f9";
            popup.appendChild(questionContainer);

            // Fetch questions to populate the container
            fetch("http://127.0.0.1:5000/questions")
                .then(response => response.json())
                .then(questions => {
                    questions.forEach(question => {
                        const checkbox = document.createElement("input");
                        checkbox.type = "checkbox";
                        checkbox.value = question.id;

                        const label = document.createElement("label");
                        label.textContent = question.question;
                        label.style.display = "block";

                        const wrapper = document.createElement("div");
                        wrapper.appendChild(checkbox);
                        wrapper.appendChild(label);

                        questionContainer.appendChild(wrapper);
                    });
                })
                .catch(error => {
                    console.error("Error fetching questions:", error);
                    alert("Failed to load questions.");
                });

            // Add submit button
            const submitButton = document.createElement("button");
            submitButton.textContent = "Launch Test";
            submitButton.style.display = "block";
            submitButton.style.marginTop = "10px";
            submitButton.onclick = () => {
                const testName = testNameInput.value;
                const selectedQuestions = Array.from(questionContainer.querySelectorAll("input[type='checkbox']:checked"))
                    .map(checkbox => checkbox.value);

                if (!testName) {
                    alert("Please enter a test name.");
                    return;
                }

                if (selectedQuestions.length === 0) {
                    alert("Please select at least one question.");
                    return;
                }

                fetch("http://127.0.0.1:5000/launch_test", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ test_name: testName, question_ids: selectedQuestions })
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert("Test launched successfully!");
                            document.body.removeChild(popup);
                        } else {
                            alert("Failed to launch test: " + data.message);
                        }
                    })
                    .catch(error => {
                        console.error("Error launching test:", error);
                        alert("An error occurred while launching the test.");
                    });
            };
            // Style the submit button
            submitButton.style.padding = "10px 20px";
            submitButton.style.backgroundColor = "#007bff";
            submitButton.style.color = "white";
            submitButton.style.border = "none";
            submitButton.style.borderRadius = "5px";
            submitButton.style.cursor = "pointer";
            submitButton.style.width = "100%";
            submitButton.style.marginBottom = "10px";
            submitButton.style.fontSize = "16px";
            submitButton.style.transition = "background-color 0.3s ease";
            submitButton.onmouseover = () => submitButton.style.backgroundColor = "#0056b3";
            submitButton.onmouseout = () => submitButton.style.backgroundColor = "#007bff";
            popup.appendChild(submitButton);

            // Add cancel button
            const cancelButton = document.createElement("button");
            cancelButton.textContent = "Cancel";
            cancelButton.style.display = "block";
            cancelButton.style.marginTop = "10px";
            cancelButton.onclick = () => {
                document.body.removeChild(popup);
            };
            // Style the cancel button
            cancelButton.style.padding = "10px 20px";
            cancelButton.style.backgroundColor = "#dc3545";
            cancelButton.style.color = "white";
            cancelButton.style.border = "none";
            cancelButton.style.borderRadius = "5px";
            cancelButton.style.cursor = "pointer";
            cancelButton.style.width = "100%";
            cancelButton.style.fontSize = "16px";
            cancelButton.style.transition = "background-color 0.3s ease";
            cancelButton.onmouseover = () => cancelButton.style.backgroundColor = "#a71d2a";
            cancelButton.onmouseout = () => cancelButton.style.backgroundColor = "#dc3545";
            popup.appendChild(cancelButton);

            // Append popup to the body
            document.body.appendChild(popup);
}

document.addEventListener("DOMContentLoaded", loadExams);
    </script>
</body>
</html>